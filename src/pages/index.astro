---
// This page shows a loading screen and redirects to the appropriate language
---

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Tale - Loading...</title>
	<link rel="icon" type="image/svg+xml" href="/favicon.svg">
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			height: 100vh;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			background: #ffffff;
			font-family: system-ui, sans-serif;
			transition: background-color 0.3s ease;
		}

		@media (prefers-color-scheme: dark) {
			body {
				background: #0f0f23;
				color: #ffffff;
			}
		}

		.loading-container {
			text-align: center;
			max-width: 400px;
			padding: 2rem;
		}

		.logo {
			width: 120px;
			height: 50px;
			margin: 0 auto 2rem;
		}

		.logo svg {
			width: 100%;
			height: 100%;
		}

		/* Rainbow effect for the entire logo */
		.logo svg * {
			animation: rainbow-colors 2s linear infinite;
		}

		.loading-text {
			font-size: 1.2rem;
			font-weight: 500;
			opacity: 0.8;
			margin-bottom: 1rem;
		}

		.loading-dots {
			font-size: 1.5rem;
			animation: dots 1.5s ease-in-out infinite;
		}

		@keyframes rainbow-colors {
			0% { fill: #ff0000; stroke: #ff0000; }
			14% { fill: #ff8c00; stroke: #ff8c00; }
			28% { fill: #ffd700; stroke: #ffd700; }
			42% { fill: #32cd32; stroke: #32cd32; }
			57% { fill: #1e90ff; stroke: #1e90ff; }
			71% { fill: #8a2be2; stroke: #8a2be2; }
			85% { fill: #ff1493; stroke: #ff1493; }
			100% { fill: #ff0000; stroke: #ff0000; }
		}

		@keyframes dots {
			0%, 20% { opacity: 0; }
			50% { opacity: 1; }
			80%, 100% { opacity: 0; }
		}
	</style>
</head>
<body>
	<div class="loading-container">
		<div class="logo">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 180 64" width="56" height="25" class="logo" role="img" aria-labelledby="t">
				<title id="t">Tale</title>
				<!-- Parentesi francesi -->
				<text x="65" y="38" font-size="28" text-anchor="middle" font-family="serif" fill="currentColor">«</text>
				<!-- Penna -->
				<g fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
					<path d="M90 8 104 22 90 56 76 22Z"/>
					<circle cx="90" cy="28" r="3.5" fill="currentColor" stroke="none"/>
				</g>
				<text x="115" y="38" font-size="28" text-anchor="middle" font-family="serif" fill="currentColor">»</text>
			</svg>
		</div>
		<div class="loading-text">Welcome...</div>
		<div class="loading-dots">●●●</div>
	</div>

	<script type="module">
		// Import the client-side utilities
		import { createLangUrl, detectBrowserLanguage } from '/js/client-utils.js';

		function redirect() {
			const targetLang = detectBrowserLanguage();
			const targetUrl = createLangUrl(targetLang);
			
			// Redirect after a short delay for the loading animation
			setTimeout(() => {
				window.location.href = targetUrl;
			}, 1500);
		}

		// Start the redirect process
		redirect();
	</script>
</body>
</html>
